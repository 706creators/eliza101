---
title: First Twitter Bot (Draft)
description: 你的第一个Twitter Bot
icon: Twitter
---

## 配置 eliza 环境 (v0.25.9)

```shell
git clone https://github.com/elizaOS/eliza.git
cd eliza
git checkout v0.25.9
```

安装插件

```shell
npx elizaos plugins list    # 列出插件（已安装)
npx elizaos plugins install @elizaos-plugins/client-twitter # 安装插件
```

插件仓库: https://github.com/elizaos-plugins

这个版本的 `eliza` 弱化了 client 的概念，把 client 统一到了 plugin 里边。

install & build :

```shell
node -v
pnpm install
pnpm run build
```

## character 配置

在 character 中配置 llm 的 modelProvider 和 plugins

```json
{
  ...
  "modelProvider": "redpill",
  "plugins": ["@elizaos-plugins/client-twitter"]
  ...
}
```

twitter 相关的 plugin 有两个:

- @elizaos-plugins/client-twitter
- @elizaos-plugins/plugin-twitter
  只包含一个发 twitter 的 Action : POST_TWEET

尝试启动 `Agent`

```shell
pnpm run start --character=characters/eliza101.json
```

这个时候，会报 Env 不存在的错误。

![Image](images/twitter-leak-env.png)

## Env 配置选项

| 环境变量           | 描述                                                    |
| ------------------ | ------------------------------------------------------- |
| TWITTER_USERNAME   | twitter 用户 id                                         |
| TWITTER_PASSWORD   | 登录密码。如果你是 Gmail 登录过来的，需要单独设置一次。 |
| TWITTER_EMAIL      | 注册邮箱                                                |
| TWITTER_2FA_SECRET | 很重要，最好开启配置。                                  |

配置好以上的选项，就可以登录成功了。

Twitter 使用的 client 类库是：https://github.com/elizaOS/agent-twitter-client

## 可能出现的问题:

1. 操作过程中可能遇到网络错误,可以在 Agent 测尝试开启全局代理:

```shell
pnpm install undici # 在 agent 中安装依赖
```

agent/src/index.ts 中添加全局代理代码：

```ts
import { ProxyAgent, setGlobalDispatcher } from "undici";
const setProxy = () => {
  const proxy = process.env.AGENT_PROXY;
  if (proxy) {
    elizaLogger.info("start agents use proxy : ", proxy);
    const proxyAgent = new ProxyAgent(proxy);
    setGlobalDispatcher(proxyAgent);
  }
};

setProxy();
```

2. 部分日志显示不全

调整日志显示级别

```shell
DEFAULT_LOG_LEVEL=log # 默认是 info
```

全部的日志级别:

```ts
const customLevels: Record<string, number> = {
  fatal: 60,
  error: 50,
  warn: 40,
  info: 30,
  log: 29,
  progress: 28,
  success: 27,
  debug: 20,
  trace: 10,
};
```
